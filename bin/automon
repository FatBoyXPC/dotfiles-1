#!/bin/bash

HDMI_STATUS=$(</sys/class/drm/card0/*HDMI*/status)

# TODO - look into automating this via udev, see https://wiki.archlinux.org/index.php/PulseAudio/Examples#Automatically_switch_audio_to_HDMI

if [ $HDMI_STATUS == "connected" ]; then
    echo "HDMI is connected!"
    LAYOUT_SCRIPT=mission-desk.sh
    NEW_DPI=96
else
    echo "Looks like nothing is connected, going mobile"
    LAYOUT_SCRIPT=mobile.sh
    NEW_DPI=144
fi

sed "s/Xft.dpi.*/Xft.dpi: $NEW_DPI/" -i ~/.Xresources

$LAYOUT_SCRIPT

# For some reason, autorandr seems to be bugging out with the onelink dock
#echo "Running autorandr --change"
#/home/jeremy/bin/autorandr --change
